<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>HOME</title>
    <link rel="stylesheet" href="/css/bootstrap.css">
    <link rel="stylesheet" href="/css/bootstrap-theme.min.css">
    <link rel="stylesheet" href="/css/custom-styles.css">
    <link rel="stylesheet" href="/css/font-awesome.css">
  </head>
  <body>
    <%include header.ejs%>
    <section>
        <%include left_colum.ejs%>
        <div class="right_board">
          <header>
              <div class="h1">
                <p>
                  数据统计
                </p>
              </div>
          </header>
          <hr>
          <section>
            <h4>所有交易</h4>
            <div id = "goodsDataShow" style="height: 700px;width:100%">

            </div>
          </section>
          <hr>
          <section>
            <h4>完成交易</h4>
            <div id = "goodsDataShow-finish" style="height: 700px;width:100%">

            </div>
          </section>
          <footer class="copy_right">
              <p>Copyright © 2017.Adou All rights reserved.</p>
          </footer>
        </div>
    </section>
    <script type="text/javascript" src="/js/jquery-1.10.2.js"></script>
    <script type="text/javascript" src="/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="/js/echarts.min.js"></script>
    <script type="text/javascript" src="/js/custom-styles.js">
    </script>
    <script type="text/javascript">

    $(function () {
      var dom = document.getElementById("goodsDataShow");
      var dom2 = document.getElementById("goodsDataShow-finish");
      var dataEchart = echarts.init(dom);
      var dataEchartFin = echarts.init(dom2);

          dataEchart.hideLoading();

          option = {
              baseOption: {
                  title : {
                      text: '所有类型交易玫瑰图',
                      x:'center'
                  },
                  tooltip : {
                      trigger: 'item',
                      formatter: "{a} <br/>{b} : {c} ({d}%)"
                  },
                  legend: {
                      data:['交换','变卖','赠与','捐赠']
                  },
                  toolbox: {
                      show : true,
                      feature : {
                          mark : {show: true},
                          dataView : {show: true, readOnly: false},
                          magicType : {
                              show: true,
                              type: ['pie', 'funnel']
                          },
                          restore : {show: true},
                          saveAsImage : {show: true}
                      }
                  },
                  calculable : true,
                  series : [
                      {
                          name:'半径模式',
                          type:'pie',
                          roseType : 'radius',
                          label: {
                              normal: {
                                  show: false
                              },
                              emphasis: {
                                  show: true
                              }
                          },
                          lableLine: {
                              normal: {
                                  show: false
                              },
                              emphasis: {
                                  show: true
                              }
                          },
                          data:[
                              {value:<%= exchangelistCount%>, name:'交换'},
                              {value:<%= salelistCount%>,  name:'变卖'},
                              {value:<%= sendlistCount%>, name:'赠与'},
                              {value:<%= donatelistCount%>, name:'捐赠'}

                          ]
                      },
                      {
                          name:'面积模式',
                          type:'pie',
                          roseType : 'area',
                          data:[
                              {value:<%= exchangelistCount%>, name:'交换'},
                              {value:<%= salelistCount%>,  name:'变卖'},
                              {value:<%= sendlistCount%>, name:'赠与'},
                              {value:<%= donatelistCount%>, name:'捐赠'}

                          ]
                      }
                  ]
              },
              media: [

                  {
                      query: {
                              minWidth: 200,
                              maxHeight: 300,
                              minAspectRatio: 1.3
                      },
                      option: {
                          legend: {
                              right: 'center',
                              bottom: 0,
                              orient: 'horizontal'
                          },
                          series: [
                              {
                                  radius: [20, '50%'],
                                  center: ['25%', '50%']
                              },
                              {
                                  radius: [30, '50%'],
                                  center: ['75%', '50%']
                              }
                          ]
                      }
                  },
                  {
                      query: {
                          minWidth: 200,
                          maxHeight: 800,
                          minAspectRatio: 1.3              // 当容器宽度小于 500 时。
                  },
                      option: {
                          legend: {
                              right: 'center',
                              bottom: 0,
                              orient: 'horizontal'
                          },
                          series: [
                              {
                                  radius: [20, '50%'],
                                  center: ['25%', '50%']
                              },
                              {
                                  radius: [30, '50%'],
                                  center: ['75%', '50%']
                              }
                          ]
                      }
                  },
                  {
                      query: {
                          maxAspectRatio: 1
                      },
                      option: {
                          legend: {
                              right: 'center',
                              bottom: 0,
                              orient: 'horizontal'
                          },
                          series: [
                              {
                                  radius: [20, '50%'],
                                  center: ['50%', '30%']
                              },
                              {
                                  radius: [30, '50%'],
                                  center: ['50%', '70%']
                              }
                          ]
                      }
                  },
                  {
                      query: {
                          maxWidth: 500
                      },
                      option: {
                          legend: {
                              right: 10,
                              top: '15%',
                              orient: 'vertical'
                          },
                          series: [
                              {
                                  radius: [20, '50%'],
                                  center: ['50%', '30%']
                              },
                              {
                                  radius: [30, '50%'],
                                  center: ['50%', '75%']
                              }
                          ]
                      }
                  }
              ]
          };
          dataEchart.setOption(option);
          dataEchartFin.setOption(option);
        window.onresize = dataEchart.resize;

    })

    </script>
  </body>
</html>
